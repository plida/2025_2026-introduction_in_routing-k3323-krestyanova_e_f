University: [ITMO University](https://itmo.ru/ru/)<br />
Faculty: [FICT](https://fict.itmo.ru)<br />
Course: [Introduction in routing](https://github.com/itmo-ict-faculty/introduction-in-routing)<br />
Year: 2025/2026<br />
Group: K3323<br />
Author: Krestyanova Elisaveta Fedorovna<br />
Lab: Lab2<br />
Date of create: 16.09.2025<br />
Date of finished: -<br />

# Схема

Схема, построенная в draw.io:

<img src="images/graph-1.png" width=500px>

Схема, построенная ContainerLab:

<img src="images/graph-2.png" width=500px>

# Выбор диапазона частных IP-адресов

В лабораторной работе не было задачи подобрать адекватные диапазоны в случае воображаемого расширения компании, но всё же было решено попробовать прикинуть, какие нужны диапазоны адресов. Дальнейшие рассуждения никак не влияют на саму лабораторную работу, и носят теоретический характер. 

Для сетей, в который работают компьютеры, было решено выбрать диапазон 10.0.0.0/16. На всякий случай. 65025 хостов может быть оверкилл, но если наша компания станет невероятно популярной и богатой, 255 - чересчур малое число, чтобы брать маску /24. Можно взять какую-нибудь промежуточную маску, но ради красоты конфигов в лабе было решено остановиться здесь. 

Между роутерами сети могут позволить себе маску /30, так как такие сети соединяют только 2 устройства (сами роутеры). Эти сети хотелось разделить визуально от сетей компьютеров, поэтому был взят диапазон 192.168.0.0/16. Этот диапазон используется часто и в домашних сетях, и необходимо избежать совпадения айпи корпоративных устройств и домашних устройств сотрудника, работающего из дома, поэтому если его использовать, то использовать 192.168.2.0 и выше. Хотя некоторые провайдеры и 192.168.10.0/16 занимают... В данной работе сети получили 192.168.11.0/30-192.168.13.0/30 адреса и ладно. Какие-то компании пользуются исключительно подсетями у 10.0.0.0/8, кто-то в 172.16.0.0/12 живёт, т.к. он редко используется, кто-то задаёт 192.168.(рандомное число).0/24. 

# Конфиг yaml

Конфиг во многом похож на конфиг предыдущей лабораторной, разве что добавился ещё один компьютер, а также связи по другому проведены. В этот раз каждый роутер подсоединён к своему компьютеру через eth3 и между собой через eth1 & eth2.

# Конфиги

## Роутеры

В этой лабораторной вместо vlan-ов необходимо прописывать статические руты. Задание DHCP аналогично R01 из предыдущей работы.

В конфигах роутера указывается:

1. /ip address (на всех 3 портах, в сторону компьютера 10.x.0.1/16 адрес)
2. /ip pool
3. /ip dhcp-server
4. /ip dhcp-server network
5. /ip route (сети 10.x.0.0 за другими 2 роутерами)
6. /user (добавляем plida, убираем admin)
7. /system identity

## Компьютеры

Компьютерам выдаются айпи адреса через dhcp: `udhcpc -i eth1`. Но ещё в этом задании возникла проблема, что в Containerlab у них выставляется дефолтный маршрут от сети управления в yaml конфиге, и он в приоритете. Из-за этого любые попытки послать запрос на другой компьютер заканчиваются передачью запроса на роутер моего провайдера, где этот запрос теряется. Поэтому на стартапе у компьютеров мы удаляем этот дефолтный рут `ip route del default via 172.16.16.1 dev eth0`. При надобности его можно добавлять обратно, но с большим значением metric.

# Результаты

## Раздача IP-адресов

<img src="images/dhcpmsk.png" width=500px>

<img src="images/dhcpfrt.png" width=500px>

<img src="images/dhcpbrl.png" width=500px>


## Соединение роутеров

<img src="images/r01msk.png" width=500px>

<img src="images/r01frt.png" width=500px>

<img src="images/r01brl.png" width=500px>


## Соединение компьютеров

<img src="images/pc1.png" width=500px>

<img src="images/pc2.png" width=500px>

<img src="images/pc3.png" width=500px>


